---
# type: docs 
title: 指针
date: 2024-11-18T08:08:06+08:00
featured: false
draft: false
comment: true
toc: true
reward: true
pinned: false
carousel: false
series:
categories: []
tags: []
images: []
---

> C语言能处理一类非常特殊的数据——内存地址（常量）  

如果觉得这篇文章有用不妨点个赞吧  
{{< emoji-button >}}

## 引入

计算机内部有很多储存单元，每个储存单位都用唯一的地址编号（表示为一个整数加以区别），简称为**地址**  

或者说  

内存中每个字节都有一个编号——**地址**

指针使程序的不同部分能共享数据（**地址唯一性**）  

## 指针

指针自身的是一个变量，内容为地址变量。指针自身被称为指针变量（也作指针）。  
指针变量指向目标变量。  

```C
char *p,x;
x = "A";
p = &x;
```

`*`为取目标运算  
`&`为取地址运算  

### 空指针

```C
int *p = 0;
int p = null;
```

定义了一个空指针  
指向的目标变量为*null*  

#### 作用

> 任何变量一旦定义就有值  

在不知道指针的指向时，将其定义为空指针  

### 无类型指针

```C
void *p;
```

void意思为该指针的目标类型当前未知  
在知道目标类型之后，可用强制类型转换将空类型指针转为整形指针或字符型指针  

```C
(int*) p;
(char*) p;
```

## 例

### 数字交换

```C
#include<stdio.h>

void swap(int *p1,int *p2){
    int tmp;
    tmp = *p1;//储存p1目标变量值[a]
    *p1 = *p2;//将p2的目标变量值[b]赋值给p1
    *p2 = tmp;//将p1的原目标值[a]赋值给p2
}//将a,b地址的变量进行交换操作

int main (){
    int a, b;
    scanf("%d %d", &a, &b);
    swap(&a, &b);
    printf("%d %d\n", a, b);
}
```
## 指针与函数

指针可以是函数的参数也可以是函数的返回值  

如果返回值是地址/指针的话，函数声明时也要加上`*`
```C
int *fun(int *x, int *y);
```

> 注意：应当注意当函数返回地址时，地址对应的空间是否被释放

## 指针和数组

**数组名**就是数组在内存存储区域的首地址（常称为数组的指针），并且为常量  

指针变量可以用于存储变量的地址，也可存放数组的指针或数组元素的指针  

用一个指针变量来存储这个数组的首地址；数组和数组元素的引用，也可以通过使用指针的方式进行间接访问  

```C
int arr[10];
int* p;
p = a;//等价于p = &a[0]

```
### 指针简介访问数组元素  
- `p+i`和`a+i`都可以表示数组元素`a[i]`的**地址**  
- 间接访问`*(p+i)`和`*(a+i)`就表示为数组的各元素即等效于`a[i]`  
- `*(p+i)`$\lrArr$`p[i]`$\lrArr$`a[i]`$\lrArr$`*(a+i)`  

### 指针移动注意事项  
- 必须指向连续储存空间  
- 移动到的储存区域必须有意义  

## 指针和二维数组

二维数组在内存当中其实是一维的  
拆分地来看，对于一个二维数组，可以用一维数组代替地理解。  
不同的拆分方法诞生了不同的访问方法  

###  列地址

例如：`a[0][0]`可以视为一维数组`a[0]`的第1个值  
`a[i]+j`$\lrArr$`&a[i][0]+j`$\lrArr$`&a[i][j]`  

故可以使用`*(a[i]+j)`访问`a[i][j]`  

### 行地址

如果将行看作一个数列，则可以先通过行进行访问  

**思考过程如下：**

假设我们要访问二维数组`arr[N][N]`中的某个元素`arr[i][j]`  
-  首先我们要取到指定行
   -  将行看为一个一维数组`arr[N]`
   -  取到第i个元素的地址`arr+i`
   -  取第i个元素，即到达第i行`*(arr+i)`$\lrArr$`arr[i]`$\lrArr$`&arr[i][0]`(二级指针)
   -  此时也正好为第i行的第一个元素的地址
-  接下来开始取到指定元素
   -  进行列指针位移`*(arr+i)+j`
   -  取元素`*(*(arr+i)+j)`$\lrArr$`arr[i][j]`

### 二维数组的行指针

变量声明：`数组的数据类型 (*指针变量名)[m];`  
意义：声明指针指向m列的二维数组，或指向有m个元素的一维数组  
（可以理解为m表示了指针每次移动的步长）  

```C
int a[3][4];
int (*p)[4];

//赋值
p=a;
p=&a[0];//等价
```